<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go Algorithms - Flashcards</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        header h1 {
            font-size: 2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        header p {
            font-size: 1em;
            opacity: 0.9;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            gap: 10px;
            flex-wrap: wrap;
        }

        .section-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .section-btn {
            padding: 8px 16px;
            background: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85em;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .section-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .section-btn.active {
            background: #667eea;
            color: white;
        }

        .reset-btn {
            padding: 8px 16px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85em;
            transition: all 0.3s;
        }

        .reset-btn:hover {
            background: #c82333;
            transform: translateY(-2px);
        }

        .progress-info {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            font-size: 1.1em;
            font-weight: 600;
        }

        .card-wrapper {
            position: relative;
            min-height: 600px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .card-title {
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 20px;
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .card-description {
            font-size: 1em;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .complexity {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .complexity-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .complexity-label {
            font-size: 0.8em;
            color: #666;
            font-weight: 600;
            text-transform: uppercase;
        }

        .complexity-value {
            font-size: 1.2em;
            font-weight: 700;
            color: #333;
            font-family: 'Courier New', monospace;
        }

        .pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .pros,
        .cons {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .pros {
            border-left: 4px solid #28a745;
        }

        .cons {
            border-left: 4px solid #dc3545;
        }

        .pros h4 {
            color: #28a745;
            margin-bottom: 10px;
            font-size: 0.9em;
            text-transform: uppercase;
        }

        .cons h4 {
            color: #dc3545;
            margin-bottom: 10px;
            font-size: 0.9em;
            text-transform: uppercase;
        }

        .pros ul,
        .cons ul {
            list-style: none;
            padding-left: 0;
        }

        .pros li,
        .cons li {
            padding: 5px 0;
            font-size: 0.9em;
            line-height: 1.4;
        }

        .pros li:before {
            content: "‚úì ";
            color: #28a745;
            font-weight: bold;
            margin-right: 5px;
        }

        .cons li:before {
            content: "‚úó ";
            color: #dc3545;
            font-weight: bold;
            margin-right: 5px;
        }

        .usage {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .usage-label {
            font-weight: 700;
            color: #856404;
            font-size: 0.85em;
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .usage-text {
            color: #856404;
            font-size: 0.95em;
            line-height: 1.5;
        }

        .code-section {
            margin-top: 20px;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .code-label {
            font-weight: 700;
            color: #333;
            font-size: 0.9em;
            text-transform: uppercase;
        }

        .print-code-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.8em;
            font-weight: 600;
            transition: all 0.3s;
        }

        .print-code-btn:hover {
            background: #218838;
            transform: scale(1.05);
        }

        .code-block {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }

        .card-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px solid #e9ecef;
        }

        .known-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            user-select: none;
        }

        .known-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .known-checkbox label {
            font-weight: 600;
            color: #666;
            cursor: pointer;
        }

        .navigation {
            display: flex;
            gap: 15px;
        }

        .nav-btn {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95em;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .nav-btn:hover:not(:disabled) {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .keyboard-hint {
            text-align: center;
            color: white;
            margin-top: 15px;
            font-size: 0.85em;
            opacity: 0.8;
        }

        .card-selector {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .card-selector-label {
            color: white;
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
            font-size: 0.9em;
        }

        .card-selector-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 8px;
        }

        .card-number-btn {
            padding: 8px;
            background: white;
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85em;
            transition: all 0.3s;
            color: #333;
        }

        .card-number-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .card-number-btn.active {
            background: #667eea;
            color: white;
            border-color: white;
        }

        .card-number-btn.known {
            background: #28a745;
            color: white;
        }

        .loading {
            text-align: center;
            color: white;
            font-size: 1.5em;
            padding: 50px;
        }

        .hidden {
            display: none;
        }

        @media print {
            body {
                background: white;
            }

            .container>*:not(.print-content) {
                display: none !important;
            }

            .print-content {
                display: block !important;
            }

            .code-block {
                background: #f5f5f5;
                color: #000;
                border: 1px solid #ddd;
                page-break-inside: avoid;
            }
        }

        @media (max-width: 768px) {

            .pros-cons,
            .complexity {
                grid-template-columns: 1fr;
            }

            header h1 {
                font-size: 1.5em;
            }

            .card {
                padding: 20px;
            }

            .card-title {
                font-size: 1.4em;
            }

            .navigation {
                flex-direction: column;
                width: 100%;
            }

            .nav-btn {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1>üöÄ Go Algorithms Flashcards</h1>
            <p>Learn with interactive flashcards ‚Ä¢ Use ‚Üê ‚Üí arrow keys to navigate</p>
        </header>
        <div class="controls">
            <div class="section-nav" id="nav">
                <button class="section-btn active" onclick="filterSection('all')">All</button>
            </div>
            <button class="reset-btn" onclick="resetProgress()">Reset Progress</button>
        </div>
        <div class="progress-info" id="progress-info">Loading...</div>
        <div class="card-selector" id="card-selector" style="display: none;">
            <span class="card-selector-label">Jump to Card:</span>
            <div class="card-selector-grid" id="card-selector-grid"></div>
        </div>
        <div id="card-wrapper" class="card-wrapper">
            <div class="loading">Loading algorithms from README.md...</div>
        </div>
        <div class="keyboard-hint">üí° Tip: Use ‚Üê ‚Üí arrow keys to navigate ‚Ä¢ Space to mark as known</div>
    </div>
    <div class="print-content hidden" id="print-content"></div>
    <script>
        let algorithms = [];
        let filteredAlgorithms = [];
        let currentFilter = 'all';
        let currentIndex = 0;
        let knownCards = new Set();

        const sectionMap = {
            'Array & String Algorithms': 'array',
            'Stack & Queue': 'stack',
            'Linked Lists': 'linked',
            'Sorting Algorithms': 'sorting',
            'Search Algorithms': 'search',
            'Binary Search Trees': 'tree',
            'Tree Traversal & Operations': 'tree',
            'Dynamic Programming': 'dp'
        };

        function loadKnownCards() {
            const saved = localStorage.getItem('knownCards');
            if (saved) knownCards = new Set(JSON.parse(saved));
        }

        function saveKnownCards() {
            localStorage.setItem('knownCards', JSON.stringify([...knownCards]));
        }

        function resetProgress() {
            if (confirm('Reset all progress? This will mark all cards as unknown.')) {
                knownCards.clear();
                saveKnownCards();
                updateFilteredAlgorithms();
                renderCurrentCard();
            }
        }

        function parseReadme(content) {
            const algos = [];
            content.split(/^### /m).slice(1).forEach(section => {
                const lines = section.split('\n');
                const title = lines[0].trim();
                if (!title || title.includes('Main') || title.includes('Tests') || title.includes('Comparison Table')) return;

                // Extract description
                let description = '';
                const descMatch = section.match(/\*\*Description\*\*:\s*(.+?)(?=\n\n|\*\*Time)/s);
                if (descMatch) {
                    description = descMatch[1].trim();
                } else {
                    description = `Implementation of ${title}`;
                }

                // Extract time complexity
                let timeComplexity = 'O(n)';
                const timeMatch = section.match(/\*\*Time Complexity\*\*:\s*(.+?)(?=\n)/);
                if (timeMatch) {
                    timeComplexity = timeMatch[1].trim();
                }

                // Extract space complexity
                let spaceComplexity = 'O(1)';
                const spaceMatch = section.match(/\*\*Space Complexity\*\*:\s*(.+?)(?=\n)/);
                if (spaceMatch) {
                    spaceComplexity = spaceMatch[1].trim();
                }

                // Extract pros
                let pros = [];
                const prosMatch = section.match(/\*\*Pros\*\*:\n((?:- .+\n?)+)/);
                if (prosMatch) {
                    pros = prosMatch[1].split('\n').filter(p => p.trim()).map(p => p.replace(/^- /, '').trim());
                }

                // Extract cons
                let cons = [];
                const consMatch = section.match(/\*\*Cons\*\*:\n((?:- .+\n?)+)/);
                if (consMatch) {
                    cons = consMatch[1].split('\n').filter(c => c.trim()).map(c => c.replace(/^- /, '').trim());
                }

                // Extract usage
                let usage = '';
                const usageMatch = section.match(/\*\*Usage\*\*:\s*(.+?)(?=\n\n|```)/s);
                if (usageMatch) {
                    usage = usageMatch[1].trim();
                }

                // Extract code
                let code = '';
                const codeMatch = section.match(/```go\n([\s\S]*?)```/);
                if (codeMatch) code = codeMatch[1].trim();

                // Determine category
                let category = 'all';
                const sectionHeader = content.substring(0, content.indexOf('### ' + title));
                if (sectionHeader.includes('## Array & String')) category = 'array';
                else if (sectionHeader.includes('## Stack & Queue')) category = 'stack';
                else if (sectionHeader.includes('## Linked Lists')) category = 'linked';
                else if (sectionHeader.includes('## Sorting')) category = 'sorting';
                else if (sectionHeader.includes('## Search')) category = 'search';
                else if (sectionHeader.includes('## Binary Search Trees') || sectionHeader.includes('## Tree')) category = 'tree';
                else if (sectionHeader.includes('## Dynamic')) category = 'dp';

                if (code) {
                    algos.push({
                        title,
                        description,
                        timeComplexity,
                        spaceComplexity,
                        pros,
                        cons,
                        usage,
                        code,
                        category
                    });
                }
            });
            return algos;
        }

        function updateFilteredAlgorithms() {
            filteredAlgorithms = algorithms.filter(algo => {
                const matchesFilter = currentFilter === 'all' || algo.category === currentFilter;
                const isNotKnown = !knownCards.has(algo.title);
                return matchesFilter && isNotKnown;
            });
            if (currentIndex >= filteredAlgorithms.length) currentIndex = Math.max(0, filteredAlgorithms.length - 1);
        }

        function filterSection(category) {
            currentFilter = category;
            currentIndex = 0;
            document.querySelectorAll('.section-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateFilteredAlgorithms();
            renderCurrentCard();
        }

        function updateProgress() {
            const total = algorithms.filter(a => currentFilter === 'all' || a.category === currentFilter).length;
            const known = [...knownCards].filter(title => {
                const algo = algorithms.find(a => a.title === title);
                return algo && (currentFilter === 'all' || algo.category === currentFilter);
            }).length;
            const remaining = filteredAlgorithms.length;
            document.getElementById('progress-info').textContent =
                `Card ${currentIndex + 1} of ${remaining} ‚Ä¢ ${known} known of ${total} total`;
        }

        function renderCurrentCard() {
            const wrapper = document.getElementById('card-wrapper');
            if (filteredAlgorithms.length === 0) {
                wrapper.innerHTML = '<div class="loading">üéâ All cards completed! Click "Reset Progress" to start over.</div>';
                return;
            }

            const algo = filteredAlgorithms[currentIndex];
            const isKnown = knownCards.has(algo.title);

            wrapper.innerHTML = `
                <div class="card">
                    <div class="card-title">${algo.title}</div>
                    <div class="card-description">${algo.description}</div>
                    <div class="code-section">
                        <div class="code-header">
                            <span class="code-label">Go Implementation</span>
                            <button class="print-code-btn" onclick="printCode()">üñ®Ô∏è Print Code</button>
                        </div>
                        <div class="code-block">${algo.code}</div>
                    </div>
                    <div class="card-actions">
                        <div class="known-checkbox" onclick="toggleKnown()">
                            <input type="checkbox" id="known-check" ${isKnown ? 'checked' : ''}>
                            <label for="known-check">Mark as Known</label>
                        </div>
                        <div class="navigation">
                            <button class="nav-btn" onclick="previousCard()">‚Üê Previous</button>
                            <button class="nav-btn" onclick="nextCard()">Next ‚Üí</button>
                        </div>
                    </div>
                </div>
            `;
            updateProgress();
            renderCardSelector();
        }

        function toggleKnown() {
            const algo = filteredAlgorithms[currentIndex];
            if (knownCards.has(algo.title)) {
                knownCards.delete(algo.title);
            } else {
                knownCards.add(algo.title);
            }
            saveKnownCards();
            updateFilteredAlgorithms();
            renderCurrentCard();
        }

        function previousCard() {
            if (currentIndex > 0) {
                currentIndex--;
            } else {
                // Loop to the end
                currentIndex = filteredAlgorithms.length - 1;
            }
            renderCurrentCard();
            updateCardSelector();
        }

        function nextCard() {
            if (currentIndex < filteredAlgorithms.length - 1) {
                currentIndex++;
            } else {
                // Loop back to the start
                currentIndex = 0;
            }
            renderCurrentCard();
            updateCardSelector();
        }

        function jumpToCard(index) {
            currentIndex = index;
            renderCurrentCard();
            updateCardSelector();
        }

        function renderCardSelector() {
            const selector = document.getElementById('card-selector');
            const grid = document.getElementById('card-selector-grid');

            if (filteredAlgorithms.length === 0) {
                selector.style.display = 'none';
                return;
            }

            selector.style.display = 'block';
            grid.innerHTML = filteredAlgorithms.map((algo, index) => {
                const isKnown = knownCards.has(algo.title);
                const isActive = index === currentIndex;
                const classes = ['card-number-btn'];
                if (isActive) classes.push('active');
                if (isKnown) classes.push('known');

                return `<button class="${classes.join(' ')}" onclick="jumpToCard(${index})" title="${algo.title}">${index + 1}</button>`;
            }).join('');
        }

        function updateCardSelector() {
            const buttons = document.querySelectorAll('.card-number-btn');
            buttons.forEach((btn, index) => {
                btn.classList.remove('active');
                if (index === currentIndex) {
                    btn.classList.add('active');
                }
            });
        }

        function printCode() {
            const algo = filteredAlgorithms[currentIndex];
            const printContent = document.getElementById('print-content');
            printContent.innerHTML = `
                <h1>${algo.title}</h1>
                <h2>Go Implementation</h2>
                <pre class="code-block">${algo.code}</pre>
            `;
            window.print();
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') {
                previousCard();
            } else if (e.key === 'ArrowRight') {
                nextCard();
            } else if (e.key === ' ') {
                e.preventDefault();
                toggleKnown();
            }
        });

        // Load README and initialize
        async function loadReadme() {
            try {
                loadKnownCards();
                const response = await fetch('https://raw.githubusercontent.com/elchappo/go-snippets/refs/heads/main/README.md');
                const content = await response.text();
                algorithms = parseReadme(content);
                updateFilteredAlgorithms();
                renderCurrentCard();
            } catch (error) {
                document.getElementById('card-wrapper').innerHTML =
                    '<div class="loading">Error loading README.md from GitHub. Please check your internet connection.</div>';
                console.error('Error:', error);
            }
        }

        loadReadme();
    </script>
</body>

</html>